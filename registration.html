<!DOCTYPE html>
<html>
<head>
  <title>O r g a n i z e O r b i t</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <div class="container">
    <div class="content">
      <h1> O r g a n i z e O r b i t</h1>
      <div class="credentials">
        <form id="registration-form">
          <p>
            <input style="width:300px; height:30px;" type="text" name="email" id="email" placeholder="Email">
          </p>
          <p>
            <input style="width:300px; height:30px;" type="password" name="password" id="password" placeholder="Password">
          </p>
          <p>
            <input style="width:300px; height:30px;" type="password" name="password_confirmation" id="password_confirmation" placeholder="Confirm Password">    
          </p>
          <p>
            <button class="btn" type="submit" id="submit">
              <strong>Register</strong>
              <div id="container-stars">
                <div id="stars"></div>
              </div>
            
              <div id="glow">
                <div class="circle"></div>
                <div class="circle"></div>
              </div>
            </button>
          </p>
        </form>
        <p>
          <button class="btn" type="button" id="cancel" style="background-color: #DC2626; color: white;">
            <strong>Cancel</strong>
          </button>
        </p>
        <p id="pw_criteria">
          Password must contain both capital and lower case letters.
        </p>
        <p id="error"></p>
      </div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js"></script>
  
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDbI8T-JIXsDn7ty7uSUoF27gzhHxrg4Vo",
      authDomain: "comp380-2227b.firebaseapp.com",
      projectId: "comp380-2227b",
      storageBucket: "comp380-2227b.appspot.com",
      messagingSenderId: "373668540147",
      appId: "1:373668540147:web:043bff9b5e81d65b9e9186",
      measurementId: "G-NB7RQTTWE1"
    };

    firebase.initializeApp(firebaseConfig);
  </script>

  <script>
    for (let i = 0; i < 100; i++) {
      const star = document.createElement('div');
      star.className = 'star';
      star.style.top = `${Math.random() * 100}vh`;
      star.style.left = `${Math.random() * 100}vw`;
      document.body.appendChild(star);
    }

    // Add event listener to the cancel button
    document.getElementById('cancel').addEventListener('click', () => {
      // Redirect to signin.html
      window.location.href = './signin.html';
    });

    // Add event listener to the registration form submit button
    document.getElementById('registration-form').addEventListener('submit', (e) => {
      e.preventDefault(); // Prevent the default form submission behavior
      
      // Retrieve email and password values from the form fields
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      // Perform the account creation process using Firebase Authentication
      firebase.auth().createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
          // Account creation successful, additional actions or redirects can be performed here
          const user = userCredential.user;
          // Redirect to main.html upon successful account creation
          window.location.href = './main.html';
        })
        .catch((error) => {
          // Account creation failed, handle the error or display error message to the user
          const errorCode = error.code;
          const errorMessage = error.message;
          document.getElementById('error').textContent = `Error: ${errorCode}. Message: ${errorMessage}`;
        });
    });
  </script>
</body>
</html>
